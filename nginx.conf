server {
    # Сервер будет слушать порт 80 (HTTP) для домена domdarom.me
    listen 80;
    server_name domdarom.me www.domdarom.me;

    # ОЧЕНЬ ВАЖНО: Настройка для основной части сайта на Tilda
    # Все запросы, КРОМЕ тех, что начинаются с /api/, перенаправляем на Tilda
    location / {
        # Эти IP-адреса принадлежат Tilda (уточните в их документации, они могут меняться)
        proxy_pass http://94.250.248.40;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Настройка для вашего API
    # Все запросы, которые начинаются с /api/, перенаправляем на локальное приложение
    location /api/ {
        # Пород, на котором работает ваше приложение (например, 3000)
        proxy_pass http://localhost:3000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Могут понадобиться для корректной работы CORS и API
        proxy_buffering off;
        proxy_redirect off;
    }

    # Дополнительные location-блоки для других путей, если нужно
    # Например, для WebSocket-соединений или статических файлов вашего API
    # location /socket.io/ { ... }
    # location /static/ { ... }
}